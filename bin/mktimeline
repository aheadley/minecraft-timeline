#!/usr/bin/env php
<?php
define( 'ROOT_DIR', dirname( dirname( __FILE__ ) ) );

ini_set( 'include_path',
         ini_get( 'include_path' ) . ':' . ROOT_DIR . DIRECTORY_SEPARATOR . 'include' );

require_once( 'Zend/Loader/Autoloader.php' );
$autoloader = Zend_Loader_Autoloader::getInstance();
$autoloader->setFallbackAutoloader( true );

//init cli
$cliParser = new Console_CommandLine();

/* temp testing vars */
$logfile = 'server.log';
$timeline = new Timeline();
$xmlfile = 'parsed.xml';
//*********************

date_default_timezone_set( 'America/Detroit' );
require_once( 'Minecraft/Events.php' );
$logParser = new Minecraft_Parser_Timeline(
  new Minecraft_Log_File( $logfile ), $timeline );

$logParser->parse();

file_put_contents( $xmlfile, $timeline->toXml( null ) );
